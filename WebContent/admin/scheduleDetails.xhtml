<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:leaf="http://java.sun.com/jsf/composite/jsf2leaf">

<h:head>
	<!--<f:metadata charset="utf-8" />
   	<f:metadata name="viewport" content="width=device-width, initial-scale=1" />  -->
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	<title>Tamil Nadu Generation and Distribution Corporation
		Limited (TANGEDCO)</title>
	<!-- All Stylesheets -->
	<link rel="stylesheet"
		href="#{request.contextPath}/resources/css/all-stylesheets.css" />
	<link rel="stylesheet"
		href="#{request.contextPath}/resources/css/bootstrap.min.css" />
	<link rel="stylesheet"
		href="#{request.contextPath}/resources/css/site.css" />
	<link rel="stylesheet"
		href="#{request.contextPath}/resources/css/layout.css" />
	<link rel="stylesheet"
		href="#{request.contextPath}/resources/css/effect.css" />
	<link rel="stylesheet"
		href="#{request.contextPath}/resources/css/flashy.min.css" />
	<link rel='stylesheet'
		href='#{request.contextPath}/resources/css/count.css' />
	<link rel='stylesheet'
		href='#{request.contextPath}/resources/css/ticker.css' />
	<link rel="stylesheet"
		href="#{request.contextPath}/resources/css/leaflet.css" />
	<link rel="shortcut icon"
		href="#{request.contextPath}/resources/images/favicon.ico"
		type="image/x-icon" />
	<link rel="icon" href="#{request.contextPath}/images/favicon.ico"
		type="image/x-icon" />
<style type="text/css">
	
	
	
	
	
	
	body .ui-datatable .ui-datatable-data>tr>td {
    padding: 0.5rem 1rem !important;
}
	.table>tbody>tr>td {
    word-break: break-word;
    font-family: 'Noto Sans' !important;
  
}
	
	    .ui-filter-column .ui-column-customfilter .custom-filter {
	        width: 100%;
	        box-sizing: border-box;
	    }
	    .title-box {
	    background: #1a237e;
    margin: 0;
    padding: 10px !important;
    color: #fff !important;
    }
    .btn-lg {
    padding: 10px 30px !important;
}

.custom-thead thead tr th {
    background-color: #2d3694 !important;
    color: white !important;
}

    .custom-thead thead tr th span {
    font-size: large !important;
}

.custom-pagination .ui-paginator-page.ui-state-active {
    background-color: #2d3694 !important;
    color: white !important;
}
.card-reponsive {
    max-height: 100% !important;
    overflow-y: auto;
}
.minnagamUser
{
}

	</style>
</h:head>
<h:body class="home-01">
	<ui:insert name="header">
		<ui:include src="../header.xhtml" />
	</ui:insert>
	<p:ajaxStatus onstart="PF('statusDialog').show()"
		oncomplete="PF('statusDialog').hide()" />
	<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
		closable="false" resizable="false" showHeader="false">
		<p:graphicImage name="images/ajax-loader.gif" />
	</p:dialog>

	<h:form id="complaintForm">
		<f:metadata>
			<f:event type="preRenderView" listener="#{minnagamUser.loadPlOutagesFromDatabase}"/>
		</f:metadata>
          <p:growl id="messages" styleClass="ng-deep" showDetail="true" />
           
     <div class="col-md-12 card-body container">
      <h:outputLabel value="Current Date: #{dashAdmin.formattedDates} " 
	                   style="font-size: 18px; color: #333; font-weight: bold; padding-left: 10px;" />
       <p:commandButton value="Create Scheduled/Unscheduled"
                 action="#{minnagamUser.newusercreateschedule}"
                 style="background-color:green;color:white;padding:20px;border:none;float:right;font-family: math !important;;
    font-weight: 600 !important;;
                        text-align:center; font-size: 17px !important;height:44px;" />
					<div class="card-reponsive col-md-12  border-1 rounded-lg">
							<div class="row">
								
					                <p:dataTable id="userRequestsTable"  var="userRequestsEdit" value="#{minnagamUser.plOutageRequest}" widgetVar="customersTable3"
									 emptyMessage="No matching users found" paginator="true" paginatorPosition="bottom" rows="10"
				                    globalFilterFunction="#{dtFilterView.globalFilterFunction}"
				                     rowIndexVar="rowIndex"
				                     tableStyleClass="table table-sm table-bordered table-striped custom-thead"
				                      styleClass="custom-pagination" style="">
					                  
					                  <p:column headerText="S.No" style="width:30px !important;font-size:15px;font-family: emoji;">
								        <h:outputText value="#{rowIndex + 1}" />
								    </p:column>
					                  	
					                    <p:column headerText="Circle Name" style="width:140px !important;font-size:15px;font-family: emoji;">
					                        <h:outputText value="#{userRequestsEdit.cirName}" style="font-size:17px;font-family: emoji;"/>
					                    </p:column>
					                    <p:column headerText="Section Name" style="width:140px !important;font-size:15px;font-family: emoji;">
					                        <h:outputText value="#{userRequestsEdit.secName}" style="font-size:17px;font-family: emoji;"/>
					                    </p:column>
					                    <p:column headerText="SS Name" width="180" style="font-size:15px;font-family: emoji;">
					                        <h:outputText value="#{userRequestsEdit.ssName}" style="font-size:17px;font-family: emoji;"/>
					                    </p:column>
					                    <p:column headerText="FDR Name" width="170" style="font-size:15px;font-family: emoji;">
					                        <h:outputText value="#{userRequestsEdit.fdrName}" style="font-size:17px;font-family: emoji;"/>
					                    </p:column>
					                      <p:column headerText="DT Name" width="150" style="font-size:15px;font-family: emoji;">
					                        <h:outputText value="#{userRequestsEdit.dtName}" style="font-size:17px;font-family: emoji;"/>
					                    </p:column>
					                    <p:column headerText="From Time" width="130" style="font-size:15px;font-family: emoji;">
					                        <h:outputText value="#{userRequestsEdit.frprd}" style="font-size:17px;font-family: emoji;">
					                          <f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" />
					                          </h:outputText>
					                    </p:column>
					                     <p:column headerText="To Time" width="130" style="font-size:17px;font-family: emoji;">
					                        <h:outputText value="#{userRequestsEdit.toprd}" style="font-size:18px;font-family: emoji;">
					                          <f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" />
					                          </h:outputText>
					                    </p:column>
										<p:column headerText="Action" width="80" style="font-size:15px;font-family: emoji;">
									   <p:commandButton value="Delete" styleClass="btn btn-danger btn-block text-center fa fa-remove"
						                	  
						                	action="#{minnagamUser.deleteSchedule}"
						                	>
						                	<f:param name="scheduleId"
									value="#{userRequestsEdit.outgId}" />
									</p:commandButton>
									</p:column>
	
					                 <p:poll interval="2" listener="#{minnagamUser.loadPlOutagesFromDatabase}" update=":complaintForm:userRequestsTable" />
					                  
					                  
					                </p:dataTable>
					                
					                </div>
						</div>
					</div>
	<p:dialog id="messageDialogAlreadyEntered" widgetVar="messageDialogAlreadyEntered" 
          modal="true" showEffect="fade" hideEffect="fade" closable="false"
          width="400" height="100" style="position: fixed;        
          top: 10px;               
          left: 50%;              
          transform: translateX(-50%);  
          z-index: 9999;
          border-top: none;
          border-radius: 0 0 4px 4px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.2);">

    <div style="display: flex; align-items: center; justify-content: center; gap: 15px; padding: 20px;
                background-color: white; ">
       <br/><br/>
        <h:outputText id="dialogMessageErrorAlreadyEntered" value="Deleted Successfully" 
                      style="font-size: 24px; color: red; font-weight: 800;" />
    </div>
</p:dialog>
	</h:form>
</h:body>
</html>