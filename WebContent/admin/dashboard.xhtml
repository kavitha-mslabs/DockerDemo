<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:leaf="http://java.sun.com/jsf/composite/jsf2leaf">

<h:head>
	<!--<f:metadata charset="utf-8" />
   	<f:metadata name="viewport" content="width=device-width, initial-scale=1" />  -->
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	<title>Tamil Nadu Generation and Distribution Corporation Limited (TANGEDCO)</title>
	<!-- All Stylesheets -->
	<link rel="stylesheet"  href="#{request.contextPath}/resources/css/all-stylesheets.css" />
	<link rel="stylesheet" href="#{request.contextPath}/resources/css/bootstrap.min.css" />
	<link rel="stylesheet" href="#{request.contextPath}/resources/css/site.css"  />
	<link rel="stylesheet" href="#{request.contextPath}/resources/css/layout.css"  />
	<link rel="stylesheet" 	href="#{request.contextPath}/resources/css/effect.css" />
	<link rel="stylesheet" 	href="#{request.contextPath}/resources/css/flashy.min.css" />
	<link rel='stylesheet' href='#{request.contextPath}/resources/css/count.css' />
	<link rel='stylesheet' href='#{request.contextPath}/resources/css/ticker.css'  />
	<link rel="stylesheet"  href="#{request.contextPath}/resources/css/leaflet.css"/>
	<link rel="shortcut icon" href="#{request.contextPath}/resources/images/favicon.ico" type="image/x-icon" />
	<link rel="icon" href="#{request.contextPath}/images/favicon.ico" type="image/x-icon" />
	
	<script src="#{request.contextPath}/resources/js/leaflet.js"></script>
	<style>
	.ui-button-text.ui-c {
			padding: inherit;
		}
		.ui-dialog{
	
	top : 20% !important;
	}
	</style>


	<script type="text/javascript">
	
	function submitLoad(){
		var oldPassword = document.getElementById('myForm:old_password').value;
		var newPassword = document.getElementById('myForm:new_password').value;
		var confirmPassword = document.getElementById('myForm:confirm_password').value;
	
		showErrorMessage(oldPassword.id, oldPassword.value, "Old Password");
		showErrorMessage(newPassword.id, newPassword.value, "New Password");
		showErrorMessage(confirmPassword.id, confirmPassword.value, "Confirm Password");
		
		if(newPassword.value != confirmPassword.value) {
				$('[id="' + pass.id + '"]').after("&lt;span style='color:red;' id='span"+pass.id+"'&gt; Password and Confirm Password do not match! &lt;/span&gt;");
				return false;
		}
		if(oldPassword.value=="" || newPassword.value=="" || confirmPassword.value==""){
			return false;
		}else{
			document.getElementById('myForm:old_password').value=hex_md5(document.getElementById('inputForm:oldPassword').value);
			document.getElementById('myForm:new_password').value=hex_md5(document.getElementById('inputForm:new_password').value);
			document.getElementById('myForm:confirm_password').value=hex_md5(document.getElementById('inputForm:confirm_password').value);
			
			return true;	
		}	
	}
	
		function mapLoad() {
			//alert('test');
			//alert(document.getElementById("myForm:hidLat").value)
			var lat = document.getElementById("hidLat").value;
			var lng = document.getElementById("hidLng").value;
			var desc = document.getElementById("hidGisDesc").value;

			var mymap = L.map('mapid').setView([ lat, lng ], 13);

			L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png',
				{
					attribution : '&amp;copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
				}).addTo(mymap);
			mymap.on('click', onMapClick);
			L.marker([ lat, lng ]).addTo(mymap).bindPopup(desc).openPopup();
		}

		function onMapClick(e) {
			document.getElementById("myForm:lat").value = e.latlng.lat;
			document.getElementById("myForm:lng").value = e.latlng.lng;
			console.log(e);
		}
		
		// Validations  
		
		function validateTransfers() {
			
			var region = document.getElementById("myForm:ddRegion");
			var circle = document.getElementById("myForm:ddCircle");
			var division = document.getElementById("myForm:ddDivision");
			var subDivision = document.getElementById("myForm:ddSubDivision");
			var section = document.getElementById("myForm:ddSection");
			var descriptionTransfer = document.getElementById("myForm:descriptionTransfer");
			
			showSelectErrorMessage(region.id, region.value, $(region).prev().text());
			showSelectErrorMessage(circle.id, circle.value, $(circle).prev().text());
			showSelectErrorMessage(division.id, division.value, $(division).prev().text());
			showSelectErrorMessage(subDivision.id, subDivision.value, $(subDivision).prev().text());
			showSelectErrorMessage(section.id, section.value, $(section).prev().text());
			showErrorMessage(descriptionTransfer.id, descriptionTransfer.value, $(descriptionTransfer).prev().text());
			
			if(checkFieldEmpty(region.value) || checkFieldEmpty(circle.value) || checkFieldEmpty(division.value) ||
					checkFieldEmpty(subDivision.value) || checkFieldEmpty(section.value) || checkFieldEmpty(descriptionTransfer.value)){
				return false;
			} else {
				return true;
			}	
		}
		
		function checkFieldEmpty(fieldValue){
			if(fieldValue == "" || fieldValue == null){
		       	return true;
		    } else {
				return false;
			}	
		}
		
		function clearErrorMessage(tagid){
		    $('[id="span' + tagid + '"]').remove();
		}
		
		function validateWorkStatus(){
			var description = document.getElementById("myForm:descId");
			if(description.value == ""){
				showErrorMessage(description.id, description.value, $(description).prev().text());
				return false;
			} else {
				return true;
			}	
		}
		
		function validateCloseComplaint(){
			var completionReason = document.getElementById("myForm:ddCompletionReason");
			var remarks = document.getElementById("myForm:remarkId");
			
			showSelectErrorMessage(completionReason.id, completionReason.value, $(completionReason).prev().text());
			showErrorMessage(remarks.id, remarks.value, $(remarks).prev().text());
			
			if( completionReason.value=="" || remarks.value==""){
				return false;
			}
			else{
				return true;
			}	
		}
		
		
		function showErrorMessage(fieldId, fieldValue, fieldLabel){
			$('[id="span' + fieldId + '"]').remove();
			if(fieldValue == "" || fieldValue == null){
	       	 $('[id="' + fieldId + '"]').after("&lt;span style='color:red;' id='span"+fieldId+"'&gt;Please Enter "+fieldLabel+"&lt;/span&gt;");
	       } 
		}
		
		function showSelectErrorMessage(fieldId, fieldValue, fieldLabel){
			$('[id="span' + fieldId + '"]').remove();
			if(fieldValue == "" || fieldValue == null){
	       	 $('[id="' + fieldId + '"]').after("&lt;span style='color:red;font-size:13px;display: block;text-align: right;margin-left: 12px;' class='col-md-12' id='span"+fieldId+"'&gt;Please Select "+fieldLabel+"&lt;/span&gt;");
	       } 
		}
		
		//Function to remove the error message on the click off the input field.
		$(document).ready(function () {
			$("input[type=text]").click(function () {
				 var currentElement = $(this);
			     var tagid = currentElement.attr('id');
			     $('[id="span' + tagid + '"]').remove();
			});
			$("input[type=password]").click(function () {
				 var currentElement = $(this);
			     var tagid = currentElement.attr('id');
			     $('[id="span' + tagid + '"]').remove();
			});
		});
		
		
		function clearTextArea(docElementId){
			document.getElementById(docElementId).value = '';
		}
		
	</script>
</h:head>
<h:body class="home-01">
	<ui:insert name="header">
		<ui:include src="../header.xhtml" />
	</ui:insert>
	<p:ajaxStatus onstart="PF('statusDialog').show()"	oncomplete="PF('statusDialog').hide()" />
	<p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
		<p:graphicImage name="images/ajax-loader.gif" />
	</p:dialog>
	<h:form id="myForm">
		<div class="container-fluid">
			<div class="row px-4">
				<p:growl id="messages" styleClass="ng-deep"   showDetail="true"  />
				<div class="col-md-12 card-body">
					<p:sidebar widgetVar="sidebar1" baseZIndex="10000" id="sidePanel">
						<br />
						<br />
						<br />
						<br />
						<div class="input-field">
							<div class="form-group">
								<h:selectOneMenu rendered="#{( admin.auth.officer.roleId == 6 || admin.auth.officer.roleId == 7 || admin.auth.officer.roleId == 8 || admin.auth.officer.roleId == 9)}" class="dropdown-select browser-default form-control" 
									id="ddRegionFilter" label="ddRegionFilter"	value="#{dashAdmin.dmFilter.regions.id}">
									<p:tab rendered="#{admin.auth.officer.roleId >= 6}">
										<f:selectItem itemLabel="Select Region..." itemDisabled="#{dashAdmin.regionDropDownDisabled}"/>
									</p:tab>
									<f:selectItems var="des" value="#{dashAdmin.dmFilter.lstRegions}"
										itemLabel="#{des.name}" itemValue="#{des.id}" itemDisabled="#{dashAdmin.regionDropDownDisabled}"/>
									<p:ajax event="change" update="ddCircleFilter,ddDivisionFilter,ddSubDivisionFilter,ddSectionFilter"
										listener="#{dashAdmin.listCircles(dashAdmin.dmFilter.regions.id)}"/>
								</h:selectOneMenu>
							</div>
						</div>
						<div class="form-group mb-1">
							<div class="input-field">
								<h:selectOneMenu rendered="#{admin.auth.officer.roleId == 5}"	class="dropdown-select browser-default form-control"
									id="ddCircleFilter" label="ddCircleFilter" value="#{dashAdmin.dmFilter.circles.id}">
									<f:selectItem itemLabel="Select Circle..." itemDisabled="#{dashAdmin.circleDropDownDisabled}"/>
									<f:selectItems var="des" value="#{dashAdmin.dmFilter.lstCircles}"
										itemLabel="#{des.name}" itemValue="#{des.id}" itemDisabled="#{dashAdmin.circleDropDownDisabled}"/>
									<p:ajax event="change" update="ddDivisionFilter,ddSubDivisionFilter,ddSectionFilter"
										listener="#{dashAdmin.listDivisions(dashAdmin.dmFilter.circles.id)}"></p:ajax>
								</h:selectOneMenu>
							</div>
						</div>
						<div class="form-group mb-1">
							<div class="input-field">
								<h:selectOneMenu rendered="#{( admin.auth.officer.roleId == 4|| admin.auth.officer.roleId == 5)}"	class="dropdown-select browser-default form-control"
									id="ddDivisionFilter" label="ddDivisionFilter"	value="#{dashAdmin.dmFilter.divisions.id}">
									<f:selectItem itemLabel="Select Division..." itemDisabled="#{dashAdmin.divisionDropDownDisabled}"/>
									<f:selectItems var="des" value="#{dashAdmin.dmFilter.lstDivisions}"
										itemLabel="#{des.name}" itemValue="#{des.id}" itemDisabled="#{dashAdmin.divisionDropDownDisabled}"/>
									<p:ajax event="change" update="ddSubDivisionFilter,ddSectionFilter"
										listener="#{dashAdmin.listSubDivisions(dashAdmin.dmFilter.divisions.id)}"></p:ajax>
								</h:selectOneMenu>
							</div>
						</div>
						<div class="form-group mb-1">
							<div class="input-field">
								<h:selectOneMenu rendered="#{( admin.auth.officer.roleId == 3 || admin.auth.officer.roleId == 4|| admin.auth.officer.roleId == 5)}" class="dropdown-select browser-default form-control" 
									id="ddSubDivisionFilter" label="ddSubDivisionFilter" value="#{dashAdmin.dmFilter.subDivisions.id}">
									<f:selectItem itemLabel="Select Sub Division..." itemDisabled="#{dashAdmin.subDiviviondropDownDisabled}"/>
									<f:selectItems var="des" value="#{dashAdmin.dmFilter.lstSubDivisions}"
										itemLabel="#{des.name}" itemValue="#{des.id}" itemDisabled="#{dashAdmin.subDiviviondropDownDisabled}"/>
									<p:ajax event="change" update="ddSectionFilter"
										listener="#{dashAdmin.listSections(dashAdmin.dmFilter.subDivisions.id)}"></p:ajax>
								</h:selectOneMenu>
							</div>
						</div>
						<div class="form-group mb-1">
							<div class="input-field">
								<h:selectOneMenu rendered="#{ ( admin.auth.officer.roleId == 2 || admin.auth.officer.roleId == 3 || admin.auth.officer.roleId == 4|| admin.auth.officer.roleId == 5)}" class="dropdown-select browser-default form-control"
									id="ddSectionFilter" label="ddSectionFilter" value="#{dashAdmin.dmFilter.sections.id}">
									<f:selectItem itemLabel="Select Section..." />
									<f:selectItems var="des" value="#{dashAdmin.dmFilter.lstSections}"
										itemLabel="#{des.name}" itemValue="#{des.id}" />
									<p:ajax event="change" update="ddSection"
										listener="#{dashAdmin.saveSection}"></p:ajax>
								</h:selectOneMenu>
							</div>
						</div>
						<p:commandButton value="Search" styleClass="btn btn-primary btn-block text-center" rendered="#{admin.auth.officer.roleId > 1}"
							action="#{dashAdmin.updateDashBoard()}" oncomplete="PF('sidebar1').hide()" update="pnlDashService pnlDashGeneral listComp" />
					</p:sidebar>
					<div class="row">
						<div class="col-6">
							<p:panel id="pnlNoComplaints"
								rendered="#{dashAdmin.dm.arrDash[0][0]==-1}">
								<h4>No Complaints</h4>
							</p:panel>
							<p:panel id="pnlDashService">
								<div class="tab-content" id="v-pills-tabContent">
									<div class="tab-pane fade show active" id="v-pills-home"
										role="tabpanel" aria-labelledby="v-pills-home-tab">
										<div class="card-reponsive">
											<!--card starts-->
											<div class="card shadow mb-1 ml-0">
												<div class="card-body p-1">
													
													<div class="row m-0">
														<div class="col-md-3 m-0  bg-white">
															<div class="text-center">
																<div class="row">
																	<p:commandLink id="cc0" action="#{dashAdmin.listComplaints(0,-1)}"
																		styleClass="col-12" update="listComp searchPanel">
																		<h:outputText styleClass="h1"
																			value="#{dashAdmin.dm.arrDash[0][0]+dashAdmin.dm.arrDash[0][1]}" />
																	</p:commandLink>
																	<p:commandLink id="cn0" action="#{dashAdmin.listComplaints(0,-1)}"
																		styleClass="col-12" update="listComp searchPanel">
																		<h:outputText value="Power Failures"
																			styleClass="h6 mb-1 text-bold text-uppercase" />
																	</p:commandLink>
																</div>
															</div>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn1 ">
															<p:commandLink id="c00" action="#{dashAdmin.listComplaints(0,0)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[0][0]}"
																	styleClass="h2 text-bold text-danger mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Pending</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn2 ">
															<p:commandLink id="c01"	action="#{dashAdmin.listComplaints(0,1)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[0][1]}"
																	styleClass="h2 text-bold text-primary mb-0 col-12" />
																<small class="col-12 text-bold text-dark">In Progress</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn3 ">
															<p:commandLink id="c02"	action="#{dashAdmin.listComplaints(0,2)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[0][2]}"
																	styleClass="h2 text-bold text-success mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Completed</small>
															</p:commandLink>
														</div>
													</div>
												</div>
												<!--card ends-->
											</div>
										</div>
									</div>
									<div class="tab-pane fade  show active" id="v-pills-profile"
										role="tabpanel" aria-labelledby="v-pills-profile-tab">
										<div class="card-reponsive">
											<!--card starts-->
											<div class="card shadow mb-1 ml-0">
												<div class="card-body p-1">
													<div class="row m-0">
														<div class="col-md-3 m-0  bg-white">
															<div class="text-center">
																<div class="row">
																	<p:commandLink id="cc1" action="#{dashAdmin.listComplaints(1,-1)}" styleClass="col-12" update="listComp searchPanel">
																		<h:outputText styleClass="h1"
																			value="#{dashAdmin.dm.arrDash[1][0]+dashAdmin.dm.arrDash[1][1]}" />
																	</p:commandLink>
																	<p:commandLink id="cn1" action="#{dashAdmin.listComplaints(1,-1)}"
																		styleClass="col-12" update="listComp searchPanel">
																		<h:outputText value="Voltage Fluctuation" styleClass="h6 mb-1 text-bold text-uppercase" />
																	</p:commandLink>
																</div>
															</div>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn1 ">
															<p:commandLink id="c10" action="#{dashAdmin.listComplaints(1,0)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[1][0]}" styleClass="h2 text-bold text-danger mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Pending</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn2" >
															<p:commandLink id="c11" action="#{dashAdmin.listComplaints(1,1)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[1][1]}"
																	styleClass="h2 text-bold text-primary mb-0 col-12" />
																<small class="col-12 text-bold text-dark">In Progress</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn3">
															<p:commandLink id="c12" action="#{dashAdmin.listComplaints(1,2)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[1][2]}"
																	styleClass="h2 text-bold text-success mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Completed</small>
															</p:commandLink>
														</div>
													</div>
												</div>
											</div>
											<!--card ends-->
										</div>
									</div>
									<div class="tab-pane fade  show active" id="v-pills-messages"
										role="tabpanel" aria-labelledby="v-pills-messages-tab">
										<div class="card-reponsive">
											<!--card starts-->
											<div class="card shadow mb-1 ml-0">
												<div class="card-body p-1">
													<div class="row m-0 ">
														<div class="col-md-3 m-0  bg-white">
															<div class="text-center">
																<div class="row">
																	<p:commandLink id="cc2" action="#{dashAdmin.listComplaints(2,-1)}"	styleClass="col-12" update="listComp searchPanel">
																		<h:outputText styleClass="h1"
																			value="#{dashAdmin.dm.arrDash[2][0]+dashAdmin.dm.arrDash[2][1]}" />
																	</p:commandLink>
																	<p:commandLink id="cn2" action="#{dashAdmin.listComplaints(2,-1)}"	styleClass="col-12" update="listComp searchPanel">
																		<h:outputText value="Meter Complaint"
																			styleClass="h6 mb-1 text-bold text-uppercase" />
																	</p:commandLink>
																</div>
															</div>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn1">
															<p:commandLink id="c20" action="#{dashAdmin.listComplaints(2,0)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[2][0]}"
																	styleClass="h2 text-bold text-danger mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Pending</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn2">
															<p:commandLink id="c21" action="#{dashAdmin.listComplaints(2,1)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[2][1]}"
																	styleClass="h2 text-bold text-primary mb-0 col-12" />
																<small class="col-12 text-bold text-dark">In Progress</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn3">
															<p:commandLink id="c22" action="#{dashAdmin.listComplaints(2,2)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[2][2]}"
																	styleClass="h2 text-bold text-success mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Completed</small>
															</p:commandLink>
														</div>
													</div>
												</div>
											</div>
											<!--card ends-->
										</div>
									</div>
									<div class="tab-pane fade  show active" id="v-pills-settings"
										role="tabpanel" aria-labelledby="v-pills-settings-tab">
										<div class="card-reponsive">
											<!--card starts-->
											<div class="card shadow mb-1 ml-0">
												<div class="card-body p-1">
													<div class="row m-0">
														<div class="col-md-3 m-0  bg-white">
															<div class="text-center">
																<div class="row">
																	<p:commandLink id="cc3" action="#{dashAdmin.listComplaints(3,-1)}"
																		styleClass="col-12" update="listComp searchPanel">
																		<h:outputText styleClass="h1"
																			value="#{dashAdmin.dm.arrDash[3][0]+dashAdmin.dm.arrDash[3][1]}" />
																	</p:commandLink>
																	<p:commandLink id="cn3" action="#{dashAdmin.listComplaints(3,-1)}"
																		styleClass="col-12" update="listComp searchPanel">
																		<h:outputText value="Billing Complaint"
																			styleClass="h6 mb-1 text-bold text-uppercase" />
																	</p:commandLink>
																</div>
															</div>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn1">
															<p:commandLink id="c30" action="#{dashAdmin.listComplaints(3,0)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[3][0]}"
																	styleClass="h2 text-bold text-danger mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Pending</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn2">
															<p:commandLink id="c31" action="#{dashAdmin.listComplaints(3,1)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[3][1]}"
																	styleClass="h2 text-bold text-primary mb-0 col-12" />
																<small class="col-12 text-bold text-dark">In Progress</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn3">
															<p:commandLink id="c32" action="#{dashAdmin.listComplaints(3,2)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[3][2]}"
																	styleClass="h2 text-bold text-success mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Completed</small>
															</p:commandLink>
														</div>
													</div>
												</div>
											</div>
											<!--card ends-->
										</div>
									</div>
								</div>
							</p:panel>
						</div>
						<div class="col-6">
							<p:panel id="pnlDashGeneral"
								rendered="#{dashAdmin.dm.arrDash[0][0]>-1}">
								<div class="tab-content" id="v-pills-tabContent">
									<div class="tab-pane fade show active" id="v-pills-home"
										role="tabpanel" aria-labelledby="v-pills-home-tab">
										<div class="card-reponsive"></div>
									</div>
									<div class="tab-pane fade  show active" id="v-pills-fire"
										role="tabpanel" aria-labelledby="v-pills-fire-tab">
										<div class="card-reponsive">
											<!--card starts-->
											<div class="card shadow mb-1 ml-0">
												<div class="card-body p-1">
													<div class="row m-0">
														<div class="col-md-3 m-0  bg-white">
															<div class="text-center">
																<div class="row">
																	<p:commandLink id="cc4" action="#{dashAdmin.listComplaints(4,-1)}" styleClass="col-12" update="listComp searchPanel">
																		<h:outputText styleClass="h1"
																			value="#{dashAdmin.dm.arrDash[4][0]+dashAdmin.dm.arrDash[4][1]}" />
																	</p:commandLink>
																	<p:commandLink id="cn4" action="#{dashAdmin.listComplaints(4,-1)}" styleClass="col-12 mb-3" update="listComp searchPanel">
																		<h:outputText value="Fire" 
																			styleClass="h6 mb-1 text-bold text-uppercase" /> 
																	</p:commandLink>
																</div>
															</div>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn1">
															<p:commandLink id="c40" action="#{dashAdmin.listComplaints(4,0)}" styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[4][0]}"
																	styleClass="h2 text-bold text-danger mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Pending</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn2">
															<p:commandLink id="c41" action="#{dashAdmin.listComplaints(4,1)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[4][1]}"
																	styleClass="h2 text-bold text-primary mb-0 col-12" />
																<small class="col-12 text-bold text-dark">In Progress</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn3">
															<p:commandLink id="c42" action="#{dashAdmin.listComplaints(4,2)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[4][2]}"
																	styleClass="h2 text-bold text-success mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Completed</small>
															</p:commandLink>
														</div>
													</div>
												</div>
											</div>
											<!--card ends-->
										</div>
									</div>
									<div class="tab-pane fade  show active" id="v-pills-human"	role="tabpanel" aria-labelledby="v-pills-human-tab">
										<div class="card-reponsive">
											<!--card starts-->
											<div class="card shadow mb-1 ml-0">
												<div class="card-body p-1">
													<div class="row m-0">
														<div class="col-md-3 m-0  bg-white">
															<div class="text-center">
																<div class="row">
																	<p:commandLink id="cc5"	action="#{dashAdmin.listComplaints(5,-1)}"	styleClass="col-12" update="listComp searchPanel">
																		<h:outputText styleClass="h1"
																			value="#{dashAdmin.dm.arrDash[5][0]+dashAdmin.dm.arrDash[5][1]}" />
																	</p:commandLink>
																	<p:commandLink id="cn5" action="#{dashAdmin.listComplaints(5,-1)}"
																		styleClass="col-12" update="listComp searchPanel">
																		<h:outputText value="Dangerous Poles"
																			styleClass="h6 mb-1 text-bold text-uppercase" />
																	</p:commandLink>
																</div>
															</div>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn1">
															<p:commandLink id="c50" action="#{dashAdmin.listComplaints(5,0)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[5][0]}"
																	styleClass="h2 text-bold text-danger mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Pending</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn2">
															<p:commandLink id="c51" action="#{dashAdmin.listComplaints(5,1)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[5][1]}"
																	styleClass="h2 text-bold text-primary mb-0 col-12" />
																<small class="col-12 text-bold text-dark">In Progress</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn3">
															<p:commandLink id="c52" action="#{dashAdmin.listComplaints(5,2)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[5][2]}"
																	styleClass="h2 text-bold text-success mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Completed</small>
															</p:commandLink>
														</div>
													</div>
												</div>
											</div>
											<!--card ends-->
										</div>
									</div>
									<div class="tab-pane fade  show active" id="v-pills-theft"
										role="tabpanel" aria-labelledby="v-pills-theft-tab">
										<div class="card-reponsive">
											<!--card starts-->
											<div class="card shadow mb-1 ml-0">
												<div class="card-body p-1">
													<div class="row m-0 ">
														<div class="col-md-3 m-0  bg-white">
															<div class="text-center">
																<div class="row">
																	<p:commandLink id="cc6" action="#{dashAdmin.listComplaints(6,-1)}"	styleClass="col-12" update="listComp searchPanel">
																		<h:outputText styleClass="h1"
																			value="#{dashAdmin.dm.arrDash[6][0]+dashAdmin.dm.arrDash[6][1]}" />
																	</p:commandLink>
																	<p:commandLink id="cn6" action="#{dashAdmin.listComplaints(6,-1)}" styleClass="col-12  mb-3" update="listComp searchPanel">
																		<h:outputText value="Theft"
																			styleClass="h6 mb-1 text-bold text-uppercase" />
																	</p:commandLink>
																</div>
															</div>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn1">
															<p:commandLink id="c60" action="#{dashAdmin.listComplaints(6,0)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[6][0]}"
																	styleClass="h2 text-bold text-danger mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Pending</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn2">
															<p:commandLink id="c61" action="#{dashAdmin.listComplaints(6,1)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[6][1]}"
																	styleClass="h2 text-bold text-primary mb-0 col-12" />
																<small class="col-12 text-bold text-dark">In Progress</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn3">
															<p:commandLink id="c62" action="#{dashAdmin.listComplaints(6,2)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[6][2]}"
																	styleClass="h2 text-bold text-success mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Completed</small>
															</p:commandLink>
														</div>
													</div>
												</div>
											</div>
											<!--card ends-->
										</div>
									</div>
									 
									<!-- Hiding this temporarily as per Tangedco Thamizh's request 
									
									<div class="tab-pane fade  show active" id="v-pills-settings"
										role="tabpanel" aria-labelledby="v-pills-settings-tab">
										<div class="card-reponsive">
											
											<div class="card shadow mb-1 ml-0">
												<div class="card-body p-1">
													<div class="row m-0">
														<div class="col-md-3 m-0  bg-white">
															<div class="text-center">
																<div class="row">
																	<p:commandLink id="cc7" action="#{dashAdmin.listComplaints(7,-1)}"
																		styleClass="col-12" update="listComp searchPanel">
																		<h:outputText styleClass="h1"
																			value="#{dashAdmin.dm.arrDash[7][0]+dashAdmin.dm.arrDash[7][1]}" />
																	</p:commandLink>
																	<p:commandLink id="cn7" action="#{dashAdmin.listComplaints(7,-1)}"
																		styleClass="col-12" update="listComp searchPanel">
																		<h:outputText value="Application Complaint"
																			styleClass="h6 mb-1 text-bold text-uppercase" />
																	</p:commandLink>
																</div>
															</div>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn1">
															<p:commandLink id="c70" action="#{dashAdmin.listComplaints(7,0)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[7][0]}"
																	styleClass="h2 text-bold text-danger mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Pending</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn2">
															<p:commandLink id="c71" action="#{dashAdmin.listComplaints(7,1)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[7][1]}"
																	styleClass="h2 text-bold text-primary mb-0 col-12" />
																<small class="col-12 text-bold text-dark">In Progress</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn3">
															<p:commandLink id="c72" action="#{dashAdmin.listComplaints(7,2)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[7][2]}"
																	styleClass="h2 text-bold text-success mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Completed</small>
															</p:commandLink>
														</div>
													</div>
												</div>
											</div>
											
										</div>
									</div>
									-->
									
									<div class="tab-pane fade  show active" id="v-pills-settings"
										role="tabpanel" aria-labelledby="v-pills-settings-tab">
										<div class="card-reponsive">
											
											<div class="card shadow mb-1 ml-0">
												<div class="card-body p-1">
													<div class="row m-0">
														<div class="col-md-3 m-0  bg-white">
															<div class="text-center">
																<div class="row">
																	<p:commandLink id="cc7" action="#{dashAdmin.listComplaints(8,-1)}"
																		styleClass="col-12" update="listComp searchPanel">
																		<h:outputText styleClass="h1"
																			value="#{dashAdmin.dm.arrDash[8][0]+dashAdmin.dm.arrDash[8][1]}" />
																	</p:commandLink>
																	<p:commandLink id="cn7" action="#{dashAdmin.listComplaints(8,-1)}"
																		styleClass="col-12" update="listComp searchPanel">
																		<h:outputText value="Conductor Snapping"
																			styleClass="h6 mb-1 text-bold text-uppercase" />
																	</p:commandLink>
																</div>
															</div>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn1">
															<p:commandLink id="c70" action="#{dashAdmin.listComplaints(8,0)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[8][0]}"
																	styleClass="h2 text-bold text-danger mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Pending</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn2">
															<p:commandLink id="c71" action="#{dashAdmin.listComplaints(8,1)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[8][1]}"
																	styleClass="h2 text-bold text-primary mb-0 col-12" />
																<small class="col-12 text-bold text-dark">In Progress</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn3">
															<p:commandLink id="c72" action="#{dashAdmin.listComplaints(8,2)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[8][2]}"
																	styleClass="h2 text-bold text-success mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Completed</small>
															</p:commandLink>
														</div>
													</div>
												</div>
											</div>
											
										</div>
									</div>
									<!-- OTHERS  -->
									<div class="tab-pane fade  show active" id="v-pills-settings"
										role="tabpanel" aria-labelledby="v-pills-settings-tab">
										<div class="card-reponsive">
											
											<div class="card shadow mb-1 ml-0">
												<div class="card-body p-1">
													<div class="row m-0">
														<div class="col-md-3 m-0  bg-white">
															<div class="text-center">
																<div class="row">
																	<p:commandLink id="cc722" action="#{dashAdmin.listComplaints(9,-1)}"
																		styleClass="col-12" update="listComp searchPanel">
																		<h:outputText styleClass="h1"
																			value="#{dashAdmin.dm.arrDash[9][0]+dashAdmin.dm.arrDash[9][1]}" />
																	</p:commandLink>
																	<p:commandLink id="cn77" action="#{dashAdmin.listComplaints(9,-1)}"
																		styleClass="col-12" update="listComp searchPanel">
																		<h:outputText value="Others"
																			styleClass="h6 mb-1 text-bold text-uppercase" />
																	</p:commandLink>
																</div>
															</div>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn1">
															<p:commandLink id="c702" action="#{dashAdmin.listComplaints(9,0)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[9][0]}"
																	styleClass="h2 text-bold text-danger mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Pending</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn2">
															<p:commandLink id="c712" action="#{dashAdmin.listComplaints(9,1)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[9][1]}"
																	styleClass="h2 text-bold text-primary mb-0 col-12" />
																<small class="col-12 text-bold text-dark">In Progress</small>
															</p:commandLink>
														</div>
														<div class="col-md-3 text-center text-bold p-2 rounded btn3">
															<p:commandLink id="c722" action="#{dashAdmin.listComplaints(9,2)}"
																styleClass="row mx-0" update="listComp searchPanel">
																<h:outputText value="#{dashAdmin.dm.arrDash[9][2]}"
																	styleClass="h2 text-bold text-success mb-0 col-12" />
																<small class="col-12 text-bold text-dark">Completed</small>
															</p:commandLink>
														</div>
													</div>
												</div>
											</div>
											
										</div>
									</div>
								</div>
							</p:panel>
						</div>
						
						<div class="col-12">
							<p:commandButton rendered="#{ ( admin.auth.officer.roleId == 2 || admin.auth.officer.roleId == 3 || admin.auth.officer.roleId == 4 || admin.auth.officer.roleId == 5 || admin.auth.officer.roleId == 9)}"
								icon="pi pi-arrow-right" styleClass="btn btn-primary rounded fa fa-filter" value="Filter"
								action="#{dashAdmin.setFilter()}" oncomplete="PF('sidebar1').show()" update="pnlDashService pnlDashGeneral sidePanel"
								style="position: fixed;z-index: 1;left: 8px;top: 90px;padding: 0.5em 1em !important;" />
						</div>
					</div>
				</div>
				<ui:fragment rendered="#{ ( admin.auth.officer.roleId == 1 || admin.auth.officer.roleId == 2 || admin.auth.officer.roleId == 3 || admin.auth.officer.roleId == 4|| admin.auth.officer.roleId == 5 || admin.auth.officer.roleId == 9 || admin.auth.officer.roleId == 10)}">
				<div class="col-md-12">
					<p:outputPanel id="searchPanel">
						<div class="row">
							<div class="col-md-6">
								<div class="row mt-2">
									<div class="col-4 ml-2 small mb-2 mt-2">
										Complaint Number
									</div>
									<div class="col-5">
										<p:inputText id="complaintNumber" styleClass="form-control" value="#{dashAdmin.complaintNumber}" 
											onkeydown="return (event.keyCode!=13);" maxlength="9" required="required"   >
											<p:keyFilter mask="num" preventPaste="false"/>
										</p:inputText>
									</div>
									<div class="col-2">
										<p:commandButton value="Search" ajax="true" styleClass="btn btn-sm btn-primary"
											update="listComp messages searchPanel" action="#{dashAdmin.searchByComplaintNumber()}" />
									</div>
								</div>
							</div>
							<div class="col-md-6">
								<div class="row mt-2">
									<div class="col-4 ml-2 small mb-2 mt-2">
										Consumer Mobile Number
									</div>
									<div class="col-5">
										<p:inputText id="consumerMobileNumber" styleClass="form-control" value="#{dashAdmin.consumerMobileNumber}" 
										onkeydown="return (event.keyCode!=13);" maxlength="10" required="required"   >
										  <p:keyFilter mask="num" preventPaste="false"/>
										 </p:inputText>
									</div>
									<div class="col-2">
										<p:commandButton value="Search" ajax="true" styleClass="btn btn-sm btn-primary"
											update="listComp messages searchPanel" action="#{dashAdmin.searchByConsumerMobileNumber()}" />
									</div>
								</div>
							</div>
						</div>
					</p:outputPanel>
				</div>
				<div class="col-md-12 card-body container">
					<div class="card-reponsive col-md-12 p-2 border-1 rounded-lg">
						<h:panelGroup id="listComp">
							<ui:fragment rendered="#{empty dashAdmin.complaintList}">
								<div class="card shadow my-1 text-center"><br/><br/><br/><br/>No Data Available! Please refine your search!.<br/><br/><br/><br/></div>
							</ui:fragment>
							<ui:fragment rendered="#{not empty dashAdmin.complaintList}">
							<div class="row">
								<p:dataTable id="complaintTable" var="comp" value="#{dashAdmin.complaintList}" widgetVar="customersTable3"
			                     paginator="true" paginatorPosition="bottom" rows="50">
						            	<p:column rowspan="2">
								<!--card starts-->
								<div class="card shadow my-1">
									<div class="card-body p-2">
										<div class="row m-0">
											<div class="col-md-2 p-0 imgDisplay">
												<ui:fragment rendered="#{not empty comp.image1}">
												<ui:fragment rendered="#{not empty comp.image2}">
													 <div class="row">
												    	<div class="col-6 pr-0">
												    		<a href="#{admin.auth.officer.imagePath}/#{comp.image1}" target="_blank"><img src="#{admin.auth.officer.imagePath}/#{comp.image1}" width="100px" height="100px" onerror="this.onerror=null; this.src='#{request.contextPath}/resources/images/no-image-available.jpg'"></img></a>
														</div>
														<div class="col-6 pl-0">
												    		<a href="#{admin.auth.officer.imagePath}/#{comp.image2}" target="_blank"><img src="#{admin.auth.officer.imagePath}/#{comp.image2}" width="100px" height="100px" onerror="this.onerror=null; this.src='#{request.contextPath}/resources/images/no-image-available.jpg'"></img></a>
														</div>
													</div>
												</ui:fragment>
												<ui:fragment rendered="#{empty comp.image2}">
													<a href="#{admin.auth.officer.imagePath}/#{comp.image1}" target="_blank"><img src="#{admin.auth.officer.imagePath}/#{comp.image1}" width="100px" height="100px" onerror="this.onerror=null; this.src='#{request.contextPath}/resources/images/no-image-available.jpg'"></img></a>
												</ui:fragment>
											</ui:fragment>
											<ui:fragment rendered="#{empty comp.image1}">
											   <a href="#{request.contextPath}/resources/images/no-image-available.jpg" target="_blank"><img src="#{request.contextPath}/resources/images/no-image-available.jpg" width="100px"	height="100px"></img></a>
											</ui:fragment>
											</div>
											<div class="col-md-10">
												<h5 class="text-primary">
												#{comp.complaintCodeValue}  <small
													class="pull-right text-muted text-right p-1"> <h:outputText
														id="dateInput" value="#{comp.createdOn}" label="Date">
														<f:convertDateTime pattern="dd-MMM-yyyy" />
													</h:outputText>
												</small>
												<ui:fragment rendered="#{comp.serviceNumber != null}"><small class="text-danger"> #{comp.serviceNumber} </small>
												</ui:fragment>
											</h5>
												<p class="mb-1">#{comp.serviceAddress}</p>
												<ui:fragment rendered="#{comp.landmark != null}"><p class="mb-1">Landmark : #{comp.landmark} </p>
												</ui:fragment>
												<p class="mb-1">Contact Mobile No: 
                                                  #{comp.device eq 'MI' ? comp.comp_Mobile : comp.alternateMobileNo}
												</p>
												<p class="mb-1">#{comp.subCategoryName}</p>
												<span class="badge badge-info pull-left">
													#{comp.complaintStatusValue}</span> <span
													class="badge badge-danger pull-right"><h5>Complaint no
													#{comp.id}</h5></span>
											</div>
										</div>
										 <ui:fragment rendered="#{comp.statusId == 2 }">
											<ui:fragment rendered="#{comp.feedbackEmojiAndText != null}">
												<p:outputLabel value="#{comp.feedbackEmojiAndText}" styleClass="feedback-text" />
											</ui:fragment>
											<!-- <p:rating value="#{comp.rating}" readonly="true">
											</p:rating> -->
										</ui:fragment> 
									</div>

									<!--  <p:commandButton value="Put on Hold"  oncomplete="PF('dlgTakeAction').show();" rendered="#{comp.statusId != 0}" ajax="true"  styleClass="btn btn-danger" update=":myForm:pnlAction,:myForm:listComp"  actionListener="#{dashAdmin.showAction(comp,0)}"   /> -->
									<p:outputPanel id="controlBox"	rendered="#{ ( admin.auth.officer.roleId == 1 and comp.sectionId == sessionScope.loggedInSectionId || admin.auth.officer.roleId == 2 || admin.auth.officer.roleId == 9)}" styleClass="p-0" >
										<div class="row mx-0 text-center">
											<p:commandButton value="Intiate Work"
												oncomplete="PF('dlgTakeAction').show();" onclick="clearTextArea('myForm:descId')"
												rendered="#{comp.statusId == 0}" ajax="true"
												styleClass="btn btn-sm btn-primary col p-0 text-center border-right border-top fa fa-user"
												update=":myForm:pnlAction"
												action="#{dashAdmin.showAction(comp,1)}" />
											<p:commandButton value="Update"
												oncomplete="PF('dlgTakeAction').show();" onclick="clearTextArea('myForm:descId')"
												rendered="#{comp.statusId !=2 }" ajax="true"
												styleClass="btn btn-sm btn-warning col p-0 text-center border-right border-top fa fa-arrow-up"
												update=":myForm:pnlAction"
												action="#{dashAdmin.showAction(comp,1)}" />
											
												<p:commandButton value="Transfer"
													oncomplete="PF('dlgTransfer').show();"
													rendered="#{comp.statusId != 2 and comp.complaintCode >= 0}"
													ajax="true"
													styleClass="btn btn-sm btn-primary col p-0 text-center border-right border-top fa fa-check"
													update=":myForm:pnlTransfer"
													action="#{dashAdmin.showAction(comp,1)}" />
											
												<ui:fragment rendered="#{not empty comp.latitude}">
													<p:commandButton rendered="#{comp.complaintCode>=0}"
												oncomplete="PF('dlgGISMap').show();" value="View Map"
												styleClass="btn btn-sm btn-success col p-0 text-center border-top fa fa-eye"
												update=":myForm:pnlMap" action="#{dashAdmin.showMap(comp)}" />
												</ui:fragment>
											<!-- <p:commandButton rendered="#{comp.statusId != 2 }"
												oncomplete="PF('dlgCloseComplaint').show();" onclick="clearTextArea('myForm:remarkId'); clearTextArea('myForm:ddCompletionReason');"
												value="Close" ajax="true"
												styleClass="btn btn-sm btn-danger col p-0 text-center border-top fa fa-close"
												update=":myForm:pnltest"
												actionListener="#{dashAdmin.showComplete(comp)}" /> -->
										</div>
									</p:outputPanel>
									<p:panel id="toggleable_#{comp.id}" header="Complaint History"
										toggleable="true" collapsed="true" closable="false"
										toggleSpeed="500" closeSpeed="500"
										widgetVar="panel_#{comp.id}" style="margin-bottom:20px">
										<f:attribute name="complaintId" value="#{comp.id}" />
										<p:panel id="data" styleClass="p-0">
											<ui:repeat var="hist" value="#{dashAdmin.dm.lstComplaintLog}"
												varStatus="status" styleClass="p-1">
												<small class="text-muted"><i class="fa fa-clock-o"></i>
													<i>#{hist.compalintDatetime}</i></small>
												<h6>#{hist.description}</h6>
											</ui:repeat>
										</p:panel>
										<p:ajax event="toggle" listener="#{dashAdmin.onToggle}" update="data" />
									</p:panel>
								</div>
								<!--card ends-->
								        </p:column>
			       			 </p:dataTable>
							</div>
							</ui:fragment>
						</h:panelGroup>

					</div>
				</div>
				</ui:fragment>
			</div>


		</div>


		<!-- T H I S   M O D A L   I S   F O R   I N T I A T E   C O M P A L I N T S -->
		
		<p:dialog header="Take Action" widgetVar="dlgTakeAction" modal="true"
			showEffect="drop" hideEffect="drop" width="450" height="300">
			<p:outputPanel id="pnlAction">
				<div class="modal fade mt-5" id="actionModal" tabindex="-1"
					role="dialog" aria-labelledby="exampleModalLabel"
					aria-hidden="true"></div>
				<div class="modal-body">
					<h5 class="text-primary bold-text">Update Complaint #{dashAdmin.complaint.id}</h5>
					<div class="form-group">
						<label>Complaint Remark</label>
						<p:inputTextarea value="#{dashAdmin.description}" rows="4"
							cols="35" counter="display" maxlength="250" id="descId" onclick="clearErrorMessage('myForm:descId')"
							counterTemplate="{0} characters remaining." autoResize="false" />
						<br />
						<h:outputText id="display" />
					</div>
				</div>
			</p:outputPanel>
			<f:facet name="footer" class="modal-footer">
				<p:commandButton value="Take Action" ajax="true"
					styleClass="btn btn-primary" action="#{dashAdmin.takeAction()}" update="listComp messages pnlDashService pnlDashGeneral"  onclick="return validateWorkStatus();" />
				<p:commandButton value="Cancel" ajax="true"
					styleClass="btn btn-danger" oncomplete="PF('dlgTakeAction').hide();" />
			</f:facet>

		</p:dialog>

		<!-- T H I S   M O D A L   I S   F O R   C L O S E    C O M P A L I N T S -->
		
		<p:dialog header="Complete Complaint" modal="true"	widgetVar="dlgCloseAction" showEffect="drop" 
		hideEffect="drop"	width="450" height="300" id="dlgClose">
			<p:outputPanel id="pnlComplete">
				<div class="modal fade mt-5" id="actionModal" tabindex="-1"
					role="dialog" aria-labelledby="exampleModalLabel"	aria-hidden="true"></div>
				<div class="modal-body">
					<h5 class="text-primary bold-text">Close Complaint #{dashAdmin.complaint.id}</h5>
					<div class="form-group">
						<label>Reason</label> <label>Complaint Remark</label>
					</div>
				</div>
			</p:outputPanel>
			<f:facet name="footer" class="modal-footer">
				<p:commandButton value="Complete" ajax="true"
					styleClass="btn btn-primary" action="#{dashAdmin.closeComplaint()}"
					update="listComp" />
				<p:commandButton value="Cancel" ajax="true"
					styleClass="btn btn-danger"
					oncomplete="PF('dlgCloseAction').hide();" />
			</f:facet>
		</p:dialog>

		<!-- T H I S   M O D A L   I S   F O R   T R A N S F E R   C O M P A L I N T S 	-->
		
		<p:dialog header="Transfer" widgetVar="dlgTransfer" modal="true"
			showEffect="drop" hideEffect="drop" width="450" height="420">
			<p:outputPanel id="pnlTransfer">
				<div class="modal fade mt-5" id="transferModal" tabindex="-1"
					role="dialog" aria-labelledby="exampleModalLabel"
					aria-hidden="true"></div>
				<div class="modal-body">
					<h5 class="text-primary bold-text">Transfer Complaint #{dashAdmin.complaint.id}</h5>
					<div class="form-group mb-1">
						<div class="input-field row">
								<h:outputLabel for="ddRegion" value="Region" class="col-md-4 text-left"/>
								<h:selectOneMenu class="dropdown-select browser-default col-md-8 form-control mb-1"
									id="ddRegion" label="ddregion" value="#{dashAdmin.dm.regions.id}" onclick="clearErrorMessage('myForm:ddRegion')">
									<f:selectItem itemLabel="Select Region..." />
									<f:selectItems var="des" value="#{dashAdmin.dm.lstRegions}"
										itemLabel="#{des.name}" itemValue="#{des.id}" />
									<p:ajax event="change"
										update="ddCircle,ddDivision,ddSubDivision,ddSection"
										listener="#{dashAdmin.listCircles()}" />
								</h:selectOneMenu>
						</div>
						<div class="form-group mb-1">
							<div class="input-field row">
								<label class="col-md-4 text-left">Circle</label>
								<h:selectOneMenu class="dropdown-select browser-default col-md-8 form-control"
									id="ddCircle" label="ddcircle" value="#{dashAdmin.dm.circles.id}" onclick="clearErrorMessage('myForm:ddCircle')">
									<f:selectItem itemLabel="Select Circle..." />
									<f:selectItems var="des" value="#{dashAdmin.dm.lstCircles}"
										itemLabel="#{des.name}" itemValue="#{des.id}" />
									<p:ajax event="change" update="ddDivision,ddSubDivision,ddSection"
										listener="#{dashAdmin.listDivisions()}"></p:ajax>
								</h:selectOneMenu>
							</div>
						</div>
						<div class="form-group mb-1">
							<div class="input-field row">
								<label class="col-md-4 text-left">Division</label>
								<h:selectOneMenu class="dropdown-select browser-default col-md-8 form-control"
									id="ddDivision" label="ddDivision" value="#{dashAdmin.dm.divisions.id}" onclick="clearErrorMessage('myForm:ddDivision')">
									<f:selectItem itemLabel="Select Division..." />
									<f:selectItems var="des" value="#{dashAdmin.dm.lstDivisions}"
										itemLabel="#{des.name}" itemValue="#{des.id}" />
									<p:ajax event="change" update="ddSubDivision,ddSection"
										listener="#{dashAdmin.listSubDivisions()}"></p:ajax>
								</h:selectOneMenu>
							</div>
						</div>
						<div class="form-group mb-1">
							<div class="input-field row">
								<label class="col-md-4 text-left">Sub Division</label>
								<h:selectOneMenu class="dropdown-select browser-default col-md-8 form-control"
									id="ddSubDivision" label="ddSubDivision" value="#{dashAdmin.dm.subDivisions.id}" onclick="clearErrorMessage('myForm:ddSubDivision')">
									<f:selectItem itemLabel="Select Sub Division..." />
									<f:selectItems var="des" value="#{dashAdmin.dm.lstSubDivisions}"
										itemLabel="#{des.name}" itemValue="#{des.id}" />
									<p:ajax event="change" update="ddSection"
										listener="#{dashAdmin.listSections()}"></p:ajax>
								</h:selectOneMenu>
							</div>
						</div>
						<div class="form-group mb-1">
							<div class="input-field row">
								<label class="col-md-4 text-left">Section</label>
								<h:selectOneMenu class="dropdown-select browser-default col-md-8 form-control"
									id="ddSection" label="ddSection" value="#{dashAdmin.dm.sections.id}" onclick="clearErrorMessage('myForm:ddSection')">
									<f:selectItem itemLabel="Select Section..." />
									<f:selectItems var="des" value="#{dashAdmin.dm.lstSections}"
										itemLabel="#{des.name}" itemValue="#{des.id}" />
									<p:ajax event="change" update="ddSection"
										listener="#{dashAdmin.saveSection}"></p:ajax>
								</h:selectOneMenu>
							</div>
						</div>
						<div class="form-group mb-1">
							<div class="input-field ">
								<label>Complaint Remark</label>
								<p:inputTextarea value="#{dashAdmin.descriptionTransfer}" rows="4"
									cols="35" counter="display_tfr" maxlength="250" id="descriptionTransfer" onclick="clearErrorMessage('myForm:descriptionTransfer')"
									counterTemplate="{0} characters remaining." autoResize="false" />
								<br />
								<h:outputText id="display_tfr" />
							</div>
						</div>
					</div>
				</div>
			</p:outputPanel>
			<f:facet name="footer" class="modal-footer col-md-12 text-center">
				<div class="col-md-12 text-center">
				<p:commandButton value="Transfer" ajax="true"
					styleClass="btn btn-primary" action="#{dashAdmin.transferComplaint()}" update="listComp messages pnlDashService pnlDashGeneral" onclick="return validateTransfers();" />
				<p:commandButton value="Cancel" ajax="true"
					styleClass="btn btn-danger" oncomplete="PF('dlgTransfer').hide();" />
				</div>
			</f:facet>
		</p:dialog>

		<!--	T H I S   M O D A L   I S   F O R  C L O S E    C O M P A L I N T S -->
		
		<p:dialog header="Complete Complaint" modal="true"	widgetVar="dlgCloseComplaint" showEffect="drop" hideEffect="drop"
			width="450" height="300">
			<p:outputPanel id="pnltest">
				<h5 class="text-primary bold-text">Close Complaint
					#{dashAdmin.complaint.id}</h5>
				<div class="form-group">
					<label>Reason</label>
					<h:selectOneMenu class="dropdown-select browser-default" onclick="clearErrorMessage('myForm:ddCompletionReason')"
						id="ddCompletionReason" label="ddReason" value="#{dashAdmin.dm.sections.id}">
						<f:selectItem itemLabel="Select Reason..." />
						<f:selectItems var="res" value="#{dashAdmin.dm.lstReasons}"
							itemLabel="#{res.closureReason}" itemValue="#{res.complaintCode}" />
					</h:selectOneMenu>
					<br />
					<label>Complaint Remark</label>
					<p:inputTextarea value="#{dashAdmin.descriptionComplete}" rows="4"
						cols="35" counter="displayClose" maxlength="250" id="remarkId" onclick="clearErrorMessage('myForm:remarkId')"
						counterTemplate="{0} characters remaining." autoResize="false" />
					<br />
					<h:outputText id="displayClose" />
				</div>
			</p:outputPanel>
			<f:facet name="footer" class="modal-footer">
				<p:commandButton value="Complete" styleClass="btn btn-primary"
					action="#{dashAdmin.closeComplaint()}" update="listComp messages pnlDashService pnlDashGeneral" onclick="return validateCloseComplaint();" />
				<p:commandButton value="Cancel" ajax="true" styleClass="btn btn-danger"
					oncomplete="PF('dlgCloseComplaint').hide();" />
			</f:facet>
		</p:dialog>

		<!--  T H I S   M O D A L   I S   F O R  V I E W  IN G   M A P   -->
		
		<p:dialog header="View on Map" widgetVar="dlgGISMap" modal="true"
			showEffect="drop" hideEffect="drop" onShow="mapLoad();" width="900"	height="400">
			<p:outputPanel id="pnlMap">
				<h5 class="text-primary bold-text">Complaint No
					#{dashAdmin.complaint.id}</h5>
				<input type="hidden" id="hidLat"
					value="#{dashAdmin.complaint.latitude}" />
				<input type="hidden" id="hidLng"
					value="#{dashAdmin.complaint.longitude}" />
				<input type="hidden" id="hidGisDesc"
					value="#{dashAdmin.complaint.description}" />
				<div class="form-group">
					<div id="mapid" style="height: 400px;"></div>
					<!-- <leaf:mapAdvanced map="#{dashAdmin.map}" id="myMap" width="700px" height="500px"  /> -->
				</div>
			</p:outputPanel>
			<f:facet name="footer" class="modal-footer">
				<p:commandButton value="Cancel" styleClass="btn btn-danger"
					oncomplete="PF('dlgGISMap').hide();" />
			</f:facet>
		</p:dialog>

		<!--	T H I S   M O D A L   I S   F O R   V I E W I N G   P R O F I L E -->
		
		<p:dialog header="My Profile" widgetVar="dlgProfile" modal="true"
			showEffect="drop" hideEffect="drop" width="450" height="250">
			<div class="form-group mb-1">
				<div class="input-field">
					<h:outputLabel for="profile_Office" value="Office" />
					<p:inputText id="profile_Office" onkeydown="return (event.keyCode!=13);" readonly="true"
						value="#{admin.auth.officer.officeName}"
						styleClass="form-control">
					</p:inputText>
				</div>
			</div>
			<div class="form-group mb-1">
				<div class="input-field">
					<h:outputLabel for="profile_Username" value="User Name" />
					<p:inputText id="profile_Username" onkeydown="return (event.keyCode!=13);" readonly="true"
						value="#{admin.auth.officer.userName}" styleClass="form-control">
					</p:inputText>
				</div>
			</div>


			<f:facet name="footer" class="modal-footer">
				<p:commandButton value="Cancel" styleClass="btn btn-danger"
					oncomplete="PF('dlgProfile').hide();" />
			</f:facet>
		</p:dialog>
		
		<!--	T H I S   M O D A L   I S   F O R   V I E W I N G  C H A N G E  P A S S W O R D -->
	<!--  	<f:metadata>
		    <f:viewAction action="#{admin.callCenterUser.init}" />
		</f:metadata>-->
<!-- 		<p:dialog header="Change Password" widgetVar="dlgChange" modal="true"
			showEffect="drop" hideEffect="drop" width="450" height="250">
			<p:outputPanel id="pnlChnagePassword">
				<div class="form-group mb-1">
				 
					<div class="input-field">
						<h:outputLabel for="old_password" value="Old Password" />
						<p:password id="old_password" 
						    value="#{admin.officer.oldPassword}" 
						     required="required"
							styleClass="form-control" > 
							
							<p:ajax event="keyup" listener="#{admin.officer.validateOldPassword}" update="new_password confirm_password"></p:ajax>
							
						</p:password>	
						
					</div>
					
				</div>
				
					<div class="form-group mb-1">
					<div class="input-field">
						<h:outputLabel for="new_password" value="New Password" />
						<p:password id="new_password" 	
							styleClass="form-control" 
							disabled="#{admin.officer.oldPasswordCorrect}" value="#{admin.officer.newPassword}"
							>
						</p:password>
					</div>
				</div>
					<div class="form-group mb-1">
					<div class="input-field">
						<h:outputLabel for="confirm_password" value="Confirm Password" />
						<p:password id="confirm_password"
							styleClass="form-control" 
							disabled="#{admin.officer.oldPasswordCorrect}" value="#{admin.officer.confirmPassword}">
						</p:password>
					</div>
				</div>

			</p:outputPanel>
			<f:facet name="footer" class="modal-footer">
					
			<p:commandButton value="Submit" ajax="true" 
					onclick="return submitLoad();"
					action="#{admin.auth.checkOldPassword(admin.officer)}"
					update="confirmationDialog messages pnlChnagePassword"
					 styleClass="btn btn-danger">
					
			 </p:commandButton>
			 	
			 	<p:commandButton value="Cancel" styleClass="btn btn-danger"
					oncomplete="PF('dlgChange').hide();"/> 
			</f:facet>
			
		</p:dialog>
			
		<p:dialog id="confirmationDialog" header="Password Changed" widgetVar="confirmationDialog" modal="true"
			    showEffect="fade" hideEffect="fade" >
			    <div class="form-group mb-1">
			    <h:outputText value="Login with your new password." />
			    <p:commandButton value="OK" styleClass="btn btn-danger" action="#{admin.auth.logOut()}"/>
			    </div>
			</p:dialog> -->
			<!-- messageDialogalreadyexists error display dialog box -->
	<p:dialog id="messageDialogalreadyexists" widgetVar="messageDialogalreadyexists" modal="true"
          showEffect="fade" hideEffect="fade" closable="false"
          width="420" height="160" styleClass="error-dialog">

    <div style="display: flex; align-items: center; justify-content: center; gap: 15px; padding: 25px;">
        <i class="pi pi-times-circle" style="font-size: 2.5em; color: red;"></i>
        <h:outputText id="dialogMessageErroralreadyexists" value="Complaint closed successfully" 
                      style="font-size: 24px; color: #d32f2f; font-weight: 800; text-align: center;" />
    </div>
</p:dialog>

	</h:form>
</h:body>
</html>