<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Tamil Nadu Generation and Distribution Corporation Limited (TANGEDCO)</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/all-stylesheets.css" />
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/layout.css" />
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/effect.css" />
    
    <script>
	function hideGrowl() {
        setTimeout(function() {
            PF('growlWidget').hide();
        }, 3000);
    }
	
	 hideGrowl();
	 
    document.querySelector('button[value="GENERATE"]').addEventListener('click', function() {
        document.getElementById('reportLoader').style.display = 'flex';
    });


</script>


    <style>
    
    /* CENTERED ERROR MESSAGE */
.ui-growl {
    left: 50% !important;
    top: 50% !important;
    transform: translate(-50%, -50%) !important;
    width: 25% !important;
    margin: 0 10px !important;
    border: none !important;
    text-align: left !important;
}

/* ERROR MESSAGE BOX STYLE */
.ui-growl-item-container {
    min-width: 200px;
    padding: 15px;
    background: #f8d7da;
    border: 1px solid #f5c6cb;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}


/* ERROR MESSAGE TITLE STYLE */
.ui-growl-title {
  
    font-size: 20px;
    font-weight: bold;
    color: #721c24;
    margin: 0 !important;
    width: 100%;
    text-align: center;
}
/* ERROR MESSAGE DETAIL STYLE */
.ui-growl-detail {
    display:block !important;
    font-size: 16px;
    color: #721c24;
    margin: 20px !important;
    width: 50% !important;
    text-align: left !important;
    line-height: 1;
}

/* Remove all unnecessary elements */
.ui-growl-icon-close,
.ui-growl-image {
    display: none !important;
}


    #reportLoader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.5);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }
    
    .loader-content {
        background: white;
        padding: 20px;
        border-radius: 5px;
        text-align: center;
    }
    
    .loader-spinner {
        border: 5px solid #f3f3f3;
        border-top: 5px solid #3498db;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
        margin: 0 auto 15px;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f6f9;
            margin: 0;
            padding: 0;
        }
        .scrollable-container {
            width: 100%;
            height: calc(100vh - 100px);
            overflow: auto;
            border: 1px solid #ddd;
            margin-bottom: 20px;
           }
        
			.inner-scrollable {
				width: 100%;
				min-width: fit-content;
			}

        .filter-container {
            display: flex;
            flex-direction: column;
            padding: 20px;
            background: white;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            width: 400px;
            margin: 40px auto;
        }

        .filter-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .filter-label {
            width: 150px;
            font-weight: bold;
            font-size: 14px;
        }

        .filter-value {
            width: 100px;
            text-align: center;
            font-size: 14px;
        }

        .filter-check {
            width: 50px;
            text-align: center;
        }
.button-container {
    display: flex !important;
    justify-content: space-between; /* Pushes buttons to opposite ends */
    margin-top: 30px;
    width: 100%; /* Ensure full width */
}

.proceed-button, .home-button {
    background: #007bff !important;
    color: white !important;
    font-size: 14px !important;
    padding: 8px 20px !important;
    border-radius: 4px !important;
    font-weight: bold !important;
    margin: 0; /* Remove default margins */
}

.home-button {
    background: #f80000 !important; 
}

        .title {
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2c3e50;
        }
                                #currentDateCallsForm{
margin-top:-40px !important;
}
    </style>
</h:head>

<h:body>
    <ui:insert name="header">
        <ui:include src="/header.xhtml" />
    </ui:insert>

    <!-- Loading Dialog -->
    <p:ajaxStatus onstart="PF('statusDialog').show()" oncomplete="PF('statusDialog').hide()" />
    <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
        <p:graphicImage name="images/ajax-loader.gif" />
    </p:dialog>

    <h:form id="currentDateCallsForm">
    
    <p:growl id="currentDateMessage" 
         widgetVar="growlWidget" 
         life="2000" 
         sticky="false"
         showDetail="true"
         autoUpdate="true"
         escape="false"
         position="center"
         styleClass="centered-error-growl" style="width:100px !important;"/>
         
     <div class="scrollable-container">
      <div class="inner-scrollable">
        <div class="filter-container">
            <div class="title">CURRENT DATE - COMPLAINT RECEIVED ABSTRACT</div>
            
            <div class="filter-row">
                <div class="filter-label">Received Within Hours:</div>
			    <p:inputText id="hours" value="#{currentDateCalls.dmFilter.hours}" 
			        styleClass="filter-input" 
			        maxlength="1"
			        required="true"
				    requiredMessage="Hours required"
				     >
			    <f:validateLongRange minimum="0" maximum="9"/>
			     </p:inputText>

            </div>
            
            <div class="filter-row">
                <div class="filter-label">No of Offices :</div>
			    <p:inputText id="noOfOffice" value="#{currentDateCalls.dmFilter.noOfOffices}" 
                             styleClass="filter-input"
                             required="true"
                             requiredMessage="Number of offices required">
                     <div class="filter-unit"></div>
                </p:inputText>

            </div>
            
            <div class="filter-row">
                <div class="filter-label">Source</div>
                <p:selectOneMenu id="device"
						value="#{currentDateCalls.dmFilter.device}" label="Devices" styleClass="filter-input">
						
						<ui:fragment rendered="#{not (sessionAdminValueBean.roleId == 10)}">
						<f:selectItem itemLabel="ALL" itemValue="L"  />
						</ui:fragment>
						
						<f:selectItems 
				            value="#{currentDateCalls.devices}" 
				           var="device"
				            itemLabel="#{device.deviceName}" 
				            itemValue="#{device.deviceCode}" />

					</p:selectOneMenu>
					<div class="filter-unit"></div>

            </div>
            
            <div class="filter-row">
                <div class="filter-label">Category Code / Name</div>
                <p:selectOneMenu  id ="complaint_type" value="#{currentDateCalls.dmFilter.complaintType}"
						label="Complaint Type" styleClass="filter-input">
						<f:selectItem itemLabel="ALL" itemValue="AL"  />
						
						<f:selectItems 
				            value="#{currentDateCalls.categories}" 
				            var="category"
				            itemLabel="#{category.name}" 
				            itemValue="#{category.code}" />

					</p:selectOneMenu>

					<div class="filter-unit"></div>

            </div>
            
           <div class="button-container">
    <p:commandButton value="GENERATE"
                     action="#{currentDateCalls.getCurrentDateReceivedCalls()}"
                     styleClass="proceed-button"
                     update="currentDateMessage"
                     onstart="document.getElementById('reportLoader').style.display='flex';" 
                     oncomplete="document.getElementById('reportLoader').style.display='none';" />
    
</div>
        </div>
        </div>
        </div>
    </h:form>
</h:body>
</html>