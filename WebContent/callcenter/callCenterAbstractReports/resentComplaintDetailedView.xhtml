<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Tamil Nadu Generation and Distribution Corporation Limited (TANGEDCO)</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/all-stylesheets.css" />
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/layout.css" />
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/effect.css" />
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/flashy.min.css" />
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/count.css" />
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/ticker.css" />
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/leaflet.css" />
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
            color: #333;
            line-height: 1.6;
        }
        .section-header {
		font-weight: bold;
		font-size: 1.1rem;
		color: #2c3e50;
		margin-top: 15px;
		margin-bottom: 8px;
		text-transform: uppercase;
		border-bottom: 2px solid #2980b9;
		padding-bottom: 4px;
	}
	
	.details-table {
		width: 100%;
		border-collapse: collapse;
		margin-bottom: 10px;
	}
	
	.details-table td {
		padding: 10px;
		border-bottom: 1px solid #e0e0e0;
	}
	
	.field-label {
		font-weight: 600;
		color: #34495e;
		padding: 6px 10px;
		width: 30%;
		background-color: #f2f2f2;
		vertical-align: top;
	}
	
	.field-value {
		padding: 6px 10px;
		color: #2d3436;
		background-color: #fafafa;
		vertical-align: top;
	}
	
	.section-divider {
		margin: 15px 0;
		border-bottom: 1px dashed #ccc;
	}

        .content-wrapper {
            max-width: 900px;
            margin: 20px auto;
            padding: 30px;
            background: #fff;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
            border-radius: 8px;
        }

        .header-section {
            text-align: center;
            padding-bottom: 25px;
            border-bottom: 1px solid #e0e6ed;
        }

        .page-title {
            font-size: 25px;
            color: #2c3e50;
            font-weight: 600;
            margin: 0 0 16px 0;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-pending { background: #f39c12; color: white; }
        .status-resolved { background: #27ae60; color: white; }
        .status-processing { background: #3498db; color: white; }

        .section-card {
            margin-bottom: 25px;
            padding: 0;
            border-radius: 6px;
            background: #fff;
            border: 1px solid #e0e6ed;
            overflow: hidden;
        }

        .section-title {
            font-size: 16px;
            color: #fff;
            font-weight: 600;
            margin: 0;
            padding: 12px 20px;
            background: #1a237e;
            text-align: center;
        }

        .detail-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .detail-table tr {
            border-bottom: 1px solid #e0e6ed;
        }
        
        .detail-table tr:last-child {
            border-bottom: none;
        }
        
        .detail-label {
            width: 35%;
            padding: 12px 20px;
            font-weight: 500;
            color: #7f8c8d;
            vertical-align: top;
        }
        
        .detail-value {
            padding: 12px 20px;
            color: #2c3e50;
        }

        .back-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            margin-right: 20px;
            float: right;
        }
        
        .back-button:hover {
            background: #2980b9;
        }

        /* Registry table styles matching original */
        .registry-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        .registry-table th {
            background-color: #1a237e;
            color: white;
            padding: 8px;
            text-align: left;
        }
        
        .registry-table td {
            padding: 8px;
            border-bottom: 1px solid #ddd;
        }
        
        .registry-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
    </style>
</h:head>

<h:body>
    <ui:insert name="header">
		<ui:include src="/callcenterheader.xhtml" />
    </ui:insert>

    <p:ajaxStatus onstart="PF('statusDialog').show()" oncomplete="PF('statusDialog').hide()" />
    <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
        <p:graphicImage name="images/ajax-loader.gif" />
    </p:dialog>

    <div class="content-wrapper">
        <h:form id="singleComplaintForm">
            <p:commandButton value="Back" 
                     action="#{complaintResent.returnComplaintResentPage}"
                     styleClass="back-button"
                     immediate="true" />
            
				<div class="section-header" style="padding:0 0 25px !important; text-align :center !important;">COMPLAINT STATUS :
					#{complaintResent.selectedComplaintId.complaintStatusValue}</div>
				<table class="details-table">
					<tr>
						<td class="field-label">Complaint ID / Registered Date</td>
						<td class="field-value">
							#{complaintResent.selectedComplaintId.complaintId} / #{complaintResent.selectedComplaintId.createdOnFormatted}</td>
					</tr>
					<tr>
						<td class="field-label">Complaint Received Through</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.device}</td>
					</tr>
					<tr>
						<td class="field-label">Complaint Category</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.complaintType}</td>
					</tr>
					<tr>
						<td class="field-label">Sub Category</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.subCategoryName}</td>
					</tr>
					<tr>
						<td class="field-label">Description</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.complaintDescription}</td>
					</tr>
				</table>

				<div class="section-divider"></div>

				<!-- USER DETAILS Section -->
				<div class="section-header">USER DETAILS</div>
				<table class="details-table">
					<tr>
						<td class="field-label">Name</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.serviceName}</td>
					</tr>
					<tr>
						<td class="field-label">Address</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.serviceAddress}</td>
					</tr>
					<tr>
						<td class="field-label">Mobile Number</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.mobile}</td>
					</tr>
					<tr>
						<td class="field-label">Registered Mobile Number</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.registeredMobileNumber}</td>
					</tr>
				</table>

				<div class="section-divider"></div>

				<!-- OFFICE DETAILS Section -->
				<div class="section-header">OFFICE DETAILS</div>
				<table class="details-table">
					<tr>
						<td class="field-label">Region</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.regionName}</td>
					</tr>
					<tr>
						<td class="field-label">Circle</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.circleName}</td>
					</tr>
					<tr>
						<td class="field-label">Division</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.divisionName}</td>
					</tr>
					<tr>
						<td class="field-label">Sub Division</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.subDivisionName}</td>
					</tr>
					<tr>
						<td class="field-label">Section</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.sectionName}</td>
					</tr>
				</table>

				<div class="section-divider"></div>

				<!-- CLOSURE DETAILS Section -->
				<div class="section-header">CLOSURE DETAILS</div>
				<table class="details-table">
					<tr>
						<td class="field-label">Closed Date</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.attendedDate}</td>
					</tr>
					<tr>
						<td class="field-label">Closed Remarks</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.attendedRemarks}</td>
					</tr>
				</table>

				<div class="section-divider"></div>

				<!-- FEEDBACK DETAILS Section -->
				<div class="section-header">FEEDBACK DETAILS</div>
				<table class="details-table">
					<tr>
						<td class="field-label">Feedback Remarks</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.feedback}</td>
					</tr>
					<tr>
						<td class="field-label">Feedback Rating</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.feedbackRating}</td>
					</tr>
					<tr>
						<td class="field-label">Feedback Given Date</td>
						<td class="field-value">#{complaintResent.selectedComplaintId.feedBackEntryDate}</td>
					</tr>
				</table>
				
				
				<!-- TRANSFER DETAILS Section -->
<div class="section-header">TRANSFER HISTORY</div>
<p:dataTable value="#{complaintResent.selectedComplaintId.transferDetails}" var="transfer"
             styleClass="details-table" rowIndexVar="rowIndex">
    <p:column headerText="S.No">
        <h:outputText value="#{rowIndex + 1}"/>
    </p:column>
    <p:column headerText="Transfer Date">
        <h:outputText value="#{transfer.transferDate}"/>
    </p:column>
    <p:column headerText="Transferred By">
        <h:outputText value="#{transfer.transferredBy}"/>
    </p:column>
    <p:column headerText="Remarks">
        <h:outputText value="#{transfer.transferRemarks}"/>
    </p:column>
</p:dataTable>

 <!-- RESEND DETAILS Section -->
                <div class="section-header">RESEND HISTORY</div>
                <p:dataTable value="#{singleComplaintView.complaint.resendDetails}" var="resend"
                             styleClass="details-table" rowIndexVar="rowIndex">
                    <p:column headerText="S.No">
                        <h:outputText value="#{rowIndex + 1}"/>
                    </p:column>
                    <p:column headerText="Resend Date">
                        <h:outputText value="#{resend.resendDate}"/>
                    </p:column>
                    <p:column headerText="Resended By">
                        <h:outputText value="#{resend.resendedBy}"/>
                    </p:column>
                    <p:column headerText="Remarks">
                        <h:outputText value="#{resend.resendRemarks}"/>
                    </p:column>
                </p:dataTable>
                
<!-- QUALITY CHECK DETAILS Section -->
<div class="section-header">QUALITY CHECKS</div>
<p:dataTable value="#{complaintResent.selectedComplaintId.qualityCheckDetails}" var="qc"
             styleClass="details-table" rowIndexVar="rowIndex">
    <p:column headerText="S.No">
        <h:outputText value="#{rowIndex + 1}"/>
    </p:column>
    <p:column headerText="QC Date">
        <h:outputText value="#{qc.qcDate}"/>
    </p:column>
    <p:column headerText="Status">
        <h:outputText value="#{qc.qcStatus}"/>
    </p:column>
    <p:column headerText="Remarks">
        <h:outputText value="#{qc.qcRemarks}"/>
    </p:column>
</p:dataTable>
        </h:form>
    </div>
</h:body>
<script>
function clearSearchFilter(){
    window.location.reload();
}
</script>
</html>